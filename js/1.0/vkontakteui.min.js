/*
 * VKontakte UI Framework, version 1.0
 * Last update: 20.04.2011
 *
 * Author: Konstantin Babushkin
 */

typeof VK=="undefined"&&(VK={});VK._ui={require:function(b,c){c||(format=b.split(".")[b.split(".").length-1],c=format=="js"?"script":"link");if(typeof b=="object"||typeof b=="array")for(var f in b)VK._ui.require(b[f],c?c:!1);else req=document.createElement(c),req[c=="script"?"type":"rel"]=c=="script"?"text/javascript":"stylesheet",req[c=="script"?"src":"href"]=b,document.getElementsByTagName("head")[0].appendChild(req)},box:{},size:{},drop:{},check:{},radio:{}}; (function(){try{VK._ui.require(["http://vk.com/js/common.js","http://vk.com/js/lib/ui_controls.js"],"script"),VK._ui.require(["http://vk.com/css/rustyle.css","http://vk.com/css/al/common.css","http://vk.com/css/ui_controls.css"],"link")}finally{VK.box=function(b,c,f,d,e,g,j){if(b&&typeof c=="boolean"&&VK._ui.box[b])c===!0?VK._ui.box[b].show():VK._ui.box[b].hide();else{VK._ui.box[b]=(new MessageBox({title:c,width:f})).removeButtons();for(i=0;i<e.length;i++)VK._ui.box[b].addButton({style:"button_"+ e[i].style.toString(),label:e[i].label,onClick:e[i].onClick});if(typeof g=="object")for(var h in g)VK._ui.boxOptions={},VK._ui.boxOptions[h]=g[h],VK._ui.box[b].setOptions(VK._ui.boxOptions);if(typeof d=="object"||typeof d=="array"){VK._ui.box["c_"+b]=d[0]+(d[1]?"?":"");if(d[1])for(h in d[1])VK._ui.box["c_"+b]+=h+"="+d[1][h]+"&";VK._ui.box[b].loadContent(VK._ui.box["c_"+b].slice(0,-1),0,!0)}else typeof d=="string"&&VK._ui.box[b].content(d);VK._ui.box[b].show();typeof g.callback=="function"&&(VK._ui.box["i_"+ b]=setInterval(function(){geByClass("message_box")[0]&&(clearInterval(VK._ui.box["i_"+b]),g.callback())},100));j&&(VK.addCallback("onScrollTop",function(b){geByClass("message_box")[0].style.top=(b>150?b:150)+"px"}),VK.callMethod("scrollTop"))}},VK.size=function(b,c,f){if(c)ge(b).style.width=c;VK._ui.size[b]=new Autosize(ge(b),f)},VK.drop=function(b,c,f,d){d||(d={});d.width=c;VK._ui.drop[b]=new Dropdown(ge(b),f,d)},VK.auto=function(b,c,f,d){d||(d={});extend(d,{autocomplete:!0,width:c});VK._ui.drop[b]= new Autocomplete(ge(b),f,d)},VK.check=function(b,c,f,d,e,g){if((VK._ui.check[b]||typeof b=="object"||typeof b=="array")&&typeof c=="boolean")if(typeof b=="object"||typeof b=="array")for(a=0;a<b.length;a++)VK.check(b[a],c);else for(i=0;i<geByClass("checkbox_container").length;i++){if(VK._ui.check["l_"+b]=geByClass("checkbox_container")[i],VK._ui.check["l_"+b].innerHTML.match(/id=('|"|)(.[^"']*)('|"|\s)/)[2]===b)VK._ui.check["l_"+b].style.display=c==!0?"block":"none"}else{if(d)ge(b).value=1;e||(e={}); e.label=c;e.width=f;VK._ui.check[b]=new Checkbox(ge(b),e);typeof g=="boolean"&&VK.check(b,g)}},VK.radio=function(b,c,f,d,e,g){if(b&&typeof c==="undefined")return each(geByClass("radiobtn_container"),function(c,d){if(geByClass("radiobtn_on",d).length)return VK._ui.radio["ch_"+b]=[d.getElementsByTagName("input")[0].value,d.getElementsByTagName("input")[0].id],!1}),VK._ui.radio["ch_"+b];else if((VK._ui.radio[b]||typeof b=="object"||typeof b=="array")&&typeof c=="boolean")if(typeof b=="object"||typeof b== "array")for(a=0;a<b.length;a++)VK.radio(b[a],c);else for(i=0;i<geByClass("radiobtn_container").length;i++){if(VK._ui.radio["l_"+b]=geByClass("radiobtn_container")[i],VK._ui.radio["l_"+b].innerHTML.match(/id=('|"|)(.[^"']*)('|"|\s)/)[2]===b)VK._ui.radio["l_"+b].style.display=c==!0?"block":"none"}else c==="select"&&ge(b).name&&ge(b).value?Radiobutton.select(ge(b).name,ge(b).value):(e||(e={}),e.label=c,e.width=f,VK._ui.radio[b]=new Radiobutton(ge(b),e),d&&ge(b).name&&ge(b).value&&Radiobutton.select(ge(b).name, ge(b).value),typeof g=="boolean"&&VK.radio(b,g))}}})();